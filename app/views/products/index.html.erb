<h1 style="margin-bottom: 20px;">Products</h1>

<div style="
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 24px;
  padding-right: 20px;
">
  <% @products.each do |product| %>
    <div style="
      border: 1px solid #e5e5e5;
      padding: 16px;
      border-radius: 10px;
      background: white;
      transition: 0.2s ease;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    "
    onmouseover="this.style.transform='scale(1.02)'"
    onmouseout="this.style.transform='scale(1)'"
    >

      <!-- IMAGE -->
      <% if product.images.attached? %>
        <%= image_tag product.images.first,
          style: "width:100%; height:180px; object-fit:cover; border-radius:6px;" %>
      <% else %>
        <div style="
          width:100%;
          height:180px;
          background:#f2f2f2;
          border-radius:6px;
          display:flex;
          align-items:center;
          justify-content:center;
          color:#666;
        ">
          No Image
        </div>
      <% end %>

      <!-- BADGES -->
      <div style="margin-top: 10px;">
        <% if product.is_new %>
          <span style="
            background:#3EB489;
            color:white;
            font-size:11px;
            padding:3px 8px;
            border-radius:4px;
            margin-right:5px;
            font-weight:600;
          ">NEW</span>
        <% end %>

        <% if product.is_on_sale %>
          <span style="
            background:#d9534f;
            color:white;
            font-size:11px;
            padding:3px 8px;
            border-radius:4px;
            font-weight:600;
          ">SALE</span>
        <% end %>
      </div>

      <!-- PRODUCT NAME -->
      <h3 style="
        margin-top:10px;
        font-size:16px;
        font-weight:600;
        color:#333;
        line-height:1.3;
      ">
        <%= link_to product.name, product_path(product), style: "text-decoration:none; color:#0066cc;" %>
      </h3>

      <!-- PRICE -->
      <p style="margin:8px 0; font-size:16px; font-weight:700;">
        $<%= number_with_precision(product.price, precision: 2) %>
      </p>

      <!-- CATEGORIES -->
      <p style="font-size:12px; color:#777;">
        <%= product.categories.map(&:name).join(", ") %>
      </p>

      <!-- VIEW BUTTON -->
      <%= link_to "View Details", product_path(product),
        style: "
          margin-top:12px;
          display:inline-block;
          padding:8px 14px;
          background:#007bff;
          color:white;
          border-radius:6px;
          text-decoration:none;
          font-size:13px;
          font-weight:600;
        "
      %>

    </div>
  <% end %>
</div>

<br>

<div style="padding: 10px;">
  <%= paginate @products %>
</div>
